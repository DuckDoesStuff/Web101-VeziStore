<div class="main">
	<div class="container">
		<!-- BEGIN SIDEBAR & CONTENT -->
		<div class="row margin-bottom-40">
			<!-- BEGIN CONTENT -->
			<div class="col-md-12 col-sm-12">
				<h1>Shopping cart</h1>
				<div class="goods-page">
					<div class="goods-data clearfix">
						<div class="table-wrapper-responsive">
							<table id="cart-items" summary="Shopping cart">
								<tr>
									<th class="goods-page-image">Image</th>
									<th class="goods-page-description">Description</th>
									<th class="goods-page-quantity">Quantity</th>
									<th class="goods-page-price">Price</th>
									<th class="goods-page-total">Total</th>
								</tr>
							</table>
						</div>

						<div class="shopping-total">
							<ul>
								<li>
									<em>Total order</em>
									<strong id="total-order" class="price"><span>$</span>47.00</strong>
								</li>
								<li>
									<em>Shipping cost</em>
									<strong id="shipping-cost" class="price"><span>$</span>3.00</strong>
								</li>
								<li class="shopping-total-price">
									<em>Total</em>
									<strong id="total" class="price"><span>$</span>50.00</strong>
								</li>
							</ul>
						</div>
					</div>
					<a href="/home" class="btn btn-default" type="submit">Continue shopping <i
							class="fa fa-shopping-cart"></i></a>
					<button id="checkout" class="btn btn-primary" type="submit">Checkout <i class="fa fa-check"></i></button>
				</div>
			</div>
			<!-- END CONTENT -->
		</div>
		<!-- END SIDEBAR & CONTENT -->
	</div>
</div>

{{#section "scripts"}}

<script type="text/javascript">
	const loadCart = async () => {
		const cartHtml = document.querySelector('#cart-items');
		const cartItemHtml = await fetch('./assets/shopCartItem.html')
		const cartItemTemplateSrc = await cartItemHtml.text();
		const cartTemplate = Handlebars.compile(cartItemTemplateSrc);
		let totalOrder = 0;
		let shippingCost = 3;

		cart.map(item => {
			totalOrder += item.total;
			cartHtml.innerHTML += cartTemplate(item);
		})
		document.querySelector('#total-order').innerHTML = `$${totalOrder}`;
		let total = totalOrder + shippingCost;
		document.querySelector('#total').innerHTML = `$${total}`;
	}


	const checkout = async () => {
		if(cart.length > 0) {
			console.log("hi")
		}
	}

	document.addEventListener('cartLoaded', async () => {
		if(cart.length > 0) {
			loadCart();
		}else {
			document.querySelector('.goods-data').innerHTML = '<h3>Your cart is empty, go shopping!</h3>';
			document.querySelector('#checkout').classList.add('disabled');
		}
			document.querySelector("#checkout").addEventListener('click', checkout);
	});
</script>
{{/section}}